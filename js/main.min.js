const button_open=document.querySelector(".button-mail"),switchers=document.querySelectorAll(".advantage-switcher"),slides=document.querySelectorAll(".advantage-item"),modal=document.querySelector(".modal"),form=modal.querySelector(".modal-form"),button_close=modal.querySelector(".modal-close");let isStorageSupport=!0,storage={},name=form.querySelector(".modal-input.name"),email=form.querySelector(".modal-input.email"),letter=form.querySelector(".modal-textarea.letter");function switch_slides(e,t){e.addEventListener("click",(function(){let e=document.querySelector(".advantage-switcher.chosen"),o=document.querySelector(".advantage-item.chosen");e.classList.remove("chosen"),o.classList.remove("chosen"),this.classList.add("chosen"),t.classList.add("chosen")}))}for(let e=0;e<switchers.length;e++)switch_slides(switchers[e],slides[e]);try{storage.name=localStorage.getItem("form_name")?localStorage.getItem("form_name"):"",storage.email=localStorage.getItem("form_email")?localStorage.getItem("form_email"):"",storage.letter=localStorage.getItem("form_letter")?localStorage.getItem("form_letter"):""}catch(e){isStorageSupport=!1}button_open.addEventListener("click",(function(e){e.preventDefault(),modal.classList.add("opened"),storage?(name.value=storage.name,email.value=storage.email,letter.value=storage.letter):name.focus()})),button_close.addEventListener("click",(function(){modal.classList.remove("opened"),modal.classList.remove("error")})),window.addEventListener("keydown",(function(e){27===e.keyCode&&modal.classList.contains("show")&&(modal.classList.remove("opened"),modal.classList.remove("opened"))})),form.addEventListener("submit",(function(e){if(name.value.trim()&&email.value.trim()&&letter.value.trim())isStorageSupport&&(localStorage.setItem("form_name",name.value),localStorage.setItem("form_email",email.value),localStorage.setItem("form_letter",letter.value));else{e.preventDefault(),modal.classList.remove("error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("error");const t=modal.querySelectorAll("input");for(let e=0;e<t.length;e++)t[e].value.trim()&&t[e].checkValidity()?t[e].classList.remove("invalid"):t[e].classList.add("invalid");letter.value.trim()&&letter.checkValidity()?letter.classList.remove("invalid"):letter.classList.add("invalid")}}));